<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="/static/css/main.css ">
    <title>Vigorize</title>

    <script>
        function showFlashMessages(messages) {
            messages.forEach(message => {
                alert(message);  // Exibe um alerta com a mensagem
            });
        }
    </script>
    

</head>
<body class="bg-[#234035]">
    <div class="space-y-2">    
        <h1 class="text-yellow-100 text-5xl ">Perfil</h1>
        {% for txt in text %}
            <p class="text-white">{{ text.email }}</p>
        {% endfor %}
        <form action="{{ url_for('perfil.pagina_perfil')}}" method="POST" >
            <input type="hidden" name="action" value="update_name">
            <div class="space-y-2">
                {% for input in inputs %}
                    <div class="block">
                        <input class="bg-[#F8DCB3] p-2 inline rounded-lg border border-black placeholder:text-black font-semibold form-control" type="{{ input.type }}" name="{{ input.name }}" placeholder="{{ input.placeholder }}" class="p-2 rounded-lg" required>
                        <button class="p-2 bg-[#ED8D00] text-white rounded-lg">Salvar</button>
                    </div>
                {% endfor %}
            </div>
        </form>
        <form action="{{ url_for('perfil.pagina_perfil')}}" method="POST" >
            <input type="hidden" name="action" value="recover_password">
            <div>
                <button class="p-2 bg-[#ED8D00] text-white rounded-lg">Alterar Senha</button>
            </div>
        </form>
        <form action="{{ url_for('login.pagina_login')}}" method="POST" >
            <input type="hidden" name="action" value="delete_account">
            <div class="mt-8">
                <button class="p-2 bg-[#ac1d04] font-bold text-white rounded-lg">EXCLUIR CONTA</button>
            </div>
        </form>
    </div>

    {% with messages = get_flashed_messages(with_categories=True) %}
        {% if messages %}
            <script>
                // Transforma mensagens de flash em um array para o JavaScript
                const messages = {{ messages | tojson }};
                showFlashMessages(messages.map(msg => msg[1]));  // msg[1] é a mensagem, msg[0] é a categoria
            </script>
        {% endif %}
    {% endwith %}

</body>

</html>